<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jingning - Personal Website</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Mouse Effect Canvas -->
    <canvas id="mouseCanvas"></canvas>
    
    <!-- Video Background -->
    <div class="video-background">
        <video id="backgroundVideo1" muted playsinline class="video-layer active">
            <source src="background_video.MOV" type="video/quicktime">
            <source src="background_video.MOV" type="video/mp4">
        </video>
        <video id="backgroundVideo2" muted playsinline class="video-layer">
            <source src="background_video.MOV" type="video/quicktime">
            <source src="background_video.MOV" type="video/mp4">
        </video>
        <div class="video-overlay"></div>
    </div>

    <div class="container">
        <header>
            <h1 class="aurora-text typewriter" id="mainTitle">JingNing</h1>
        </header>
        
        <main>
            <section class="content">
                <a href="blog.html" class="aurora-text fade-in" id="blogTitle">Blog</a>
            </section>
            
            <section class="content">
                <a href="projects.html" class="aurora-text fade-in" id="projectsTitle">Projects</a>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mouse effect canvas setup
            const canvas = document.getElementById('mouseCanvas');
            const ctx = canvas.getContext('2d');
            
            // Set canvas size
            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // Mouse tracking
            let mouseX = 0;
            let mouseY = 0;
            let particles = [];
            
            // Track mouse position
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
            });
            
            // Particle class
            class Particle {
                constructor(x, y) {
                    this.x = x;
                    this.y = y;
                    this.vx = (Math.random() - 0.5) * 1.5;
                    this.vy = (Math.random() - 0.5) * 1.5;
                    this.life = 1;
                    this.decay = Math.random() * 0.015 + 0.005;
                    this.size = Math.random() * 3 + 1;
                    this.color = '#ffffff';
                }
                
                update() {
                    this.x += this.vx;
                    this.y += this.vy;
                    this.life -= this.decay;
                    this.size *= 0.98;
                }
                
                draw() {
                    ctx.save();
                    ctx.globalAlpha = this.life;
                    ctx.fillStyle = this.color;
                    ctx.shadowBlur = 10;
                    ctx.shadowColor = this.color;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.restore();
                }
            }
            
            // Animation loop
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Add new particles at mouse position
                if (Math.random() < 0.25) {
                    particles.push(new Particle(mouseX, mouseY));
                }
                
                // Update and draw particles
                for (let i = particles.length - 1; i >= 0; i--) {
                    particles[i].update();
                    particles[i].draw();
                    
                    // Remove dead particles
                    if (particles[i].life <= 0) {
                        particles.splice(i, 1);
                    }
                }
                
                requestAnimationFrame(animate);
            }
            
            animate();
            
            // Video background logic
            const video1 = document.getElementById('backgroundVideo1');
            const video2 = document.getElementById('backgroundVideo2');
            let currentVideo = video1;
            let nextVideo = video2;
            
            function switchVideos() {
                currentVideo.classList.remove('active');
                currentVideo.classList.add('fading');
                
                nextVideo.currentTime = 0;
                nextVideo.play();
                nextVideo.classList.add('active');
                nextVideo.classList.remove('fading');
                
                [currentVideo, nextVideo] = [nextVideo, currentVideo];
            }
            
            video1.play();
            video1.addEventListener('ended', switchVideos);
            video2.addEventListener('ended', switchVideos);
            
            video1.addEventListener('loadedmetadata', function() {
                video1.play();
            });
            
            // Typewriter animation function
            function typeWriter(element, text, speed = 100) {
                element.innerHTML = '';
                element.style.visibility = 'visible';
                
                let i = 0;
                function type() {
                    if (i < text.length) {
                        element.innerHTML += text.charAt(i);
                        i++;
                        setTimeout(type, speed);
                    }
                }
                type();
            }
            
            // Animate elements in sequence
            setTimeout(() => typeWriter(document.getElementById('mainTitle'), 'JingNing', 150), 500);
            
            // Trigger fade-in animations after typewriter finishes
            setTimeout(() => {
                document.getElementById('blogTitle').style.animation = 'fadeIn 1.5s ease-in-out forwards';
            }, 2000); // Start after "JingNing" typewriter (500ms + ~1500ms for typing)
            
            setTimeout(() => {
                document.getElementById('projectsTitle').style.animation = 'fadeIn 1.5s ease-in-out forwards';
            }, 3500); // Start 1.5s after Blog button
            
            // Smooth page transitions
            function smoothPageTransition(url) {
                document.body.style.opacity = '0';
                document.body.style.transform = 'translateY(-20px)';
                document.body.style.transition = 'all 0.4s ease-in-out';
                
                setTimeout(() => {
                    window.location.href = url;
                }, 400);
            }
            
            // Add click event listeners for smooth transitions
            document.getElementById('blogTitle').addEventListener('click', function(e) {
                e.preventDefault();
                smoothPageTransition('blog.html');
            });
            
            document.getElementById('projectsTitle').addEventListener('click', function(e) {
                e.preventDefault();
                smoothPageTransition('projects.html');
            });
        });
    </script>
</body>
</html>
